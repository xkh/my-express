(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Coupon"],{"0f35":function(t,n,e){"use strict";e("20a2");var i=e("113c"),s=e("16bc"),a=e("eba3"),o=e("42a5"),c=e("3098"),r=e("e791"),u=e("c53f"),p=e("f708"),l=e("b893"),d=e("5d2d");n["a"]={mounted:function(){var t=this;this.setApp(),this.waitInit(function(){t.setWx()})},data:function(){var t={},n=d["a"].load("USER_INFO"),e=n.id;if(r["a"].indexOf(this.$path)>=0){var i=this.$route.query.friend_id;t={title:"这一年，我在叮咚买菜的那些柴米油盐",desc:"2018悄悄过去，关于你的小秘密都在这里，最后有惊喜！",friends_title:"这一年，我在叮咚买菜的那些柴米油盐",img_url:s["j"],link:Object(l["g"])("/bill",{friend_id:e||i})}}else t={title:"叮咚买菜，29分钟生鲜到家~",desc:"0配送费0起送价的买菜神器，新人注册还有38元红包哦~",friends_title:"叮咚买菜，29分钟生鲜到家~",img_url:s["c"],link:Object(l["g"])(this.$route.fullPath)};return{common_share_info:t}},computed:{$path:function(){return this.$route.path}},methods:{setWx:function(){if(p["a"].isWeixin){var t=this.common_share_info;u["a"].setShareOption(t)}},setApp:function(){var t=this;if(p["a"].isApp&&!(r["f"].indexOf(this.$path)>=0)){c["a"].APP_E3=o["a"].subscribe(c["a"].APP_E3,function(){r["a"].indexOf(t.$path)>=0&&t.log({cid:"mybill",aid:"share"}),t.appShare()});var n={image:s["b"]};a["a"].setRightTopButton(n)}},appShare:function(){p["a"].isApp&&a["a"].share(Object(i["a"])({},this.common_share_info))},updateShare:function(t){this.common_share_info=Object.assign(this.common_share_info,t||{}),this.setWx()}}}},"16bc":function(t,n,e){"use strict";e.d(n,"b",function(){return s}),e.d(n,"c",function(){return a}),e.d(n,"g",function(){return o}),e.d(n,"h",function(){return c}),e.d(n,"e",function(){return r}),e.d(n,"f",function(){return u}),e.d(n,"d",function(){return p}),e.d(n,"i",function(){return l}),e.d(n,"j",function(){return d}),e.d(n,"l",function(){return f}),e.d(n,"m",function(){return h}),e.d(n,"n",function(){return m}),e.d(n,"o",function(){return v}),e.d(n,"p",function(){return _}),e.d(n,"q",function(){return b}),e.d(n,"r",function(){return g}),e.d(n,"s",function(){return w}),e.d(n,"t",function(){return y}),e.d(n,"u",function(){return C}),e.d(n,"a",function(){return x}),e.d(n,"v",function(){return k}),e.d(n,"k",function(){return O}),e.d(n,"w",function(){return $}),e.d(n,"x",function(){return S});var i=function(t){return"https://img.ddimg.mobi/assets/h5/".concat(t)},s=i("4602b1a87656d1501819113290.png"),a=i("9c3a30349e68a1498706936110.png"),o=i("activity-bill-first-head-log.png"),c=i("activity-bill-first-middle.png"),r=i("activity-bill-first-right-font2.png"),u=i("activity-bill-first-right-font1.png"),p=i("activity-bill-first-bottom.png"),l=i("activity-bill-pack-foot-logo.png"),d=i("activity-bill-share-small-img.png"),f=i("newtask/icon-buy.png"),h=i("newtask/icon-day.png"),m=i("newtask/icon-evaluate.png"),v=i("newtask/icon-fish.png"),_=i("newtask/icon-info.png"),b=i("newtask/icon-invite.png"),g=i("newtask/icon-meat.png"),w=i("newtask/icon-sign.png"),y=i("newtask/icon-vip.png"),C=i("newtask/logo-bottom.png"),x=i("44b2872a591fe1503888813415.png"),k=i("receive-cart-tip.png?v=1"),O=i("give-cart-title.png?v=1"),$=i("vip/member-0.png"),S=i("vip/member-1.png")},"2b73":function(t,n,e){"use strict";var i=e("7e76"),s=e.n(i);s.a},"4bec":function(t,n,e){"use strict";var i=e("e7f7"),s=e.n(i);s.a},"7e76":function(t,n,e){},e5bd:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}],staticClass:"coupon-wrapper"},[3===t.status||5===t.status?e("div",{staticClass:"notice"},[e("span",{staticClass:"notice-text"},[t._v("活动结束了，"+t._s(t.timeCount)+"s后自动跳转至首页。")]),e("span",{staticClass:"notice-link",on:{click:t.eventNotice}},[t._v("点击跳转")])]):t._e(),e("div",{staticClass:"banner"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.banner,expression:"banner"}],staticClass:"banner-img",attrs:{alt:""}})]),e("div",{staticClass:"content"},[e("div",{staticClass:"content-msg"},[t._v(t._s(t.statusEnum))]),t.prizes&&t.showCoupon?e("div",{staticClass:"coupons"},t._l(t.prizes,function(t,n){return e("coupon-item",{key:n,attrs:{coupon:t,bottom:15}})})):t._e(),t.btn_text&&t.showCoupon?e("div",{staticClass:"coupon-btn",on:{click:t.eventGoBtn}},[t._v(t._s(t.btn_text))]):t._e()]),t.description?e("div",{staticClass:"rule m-top20"},[t._m(0),e("div",{staticClass:"rule-content"},t._l(t.description,function(n,i){return e("div",{key:i,staticClass:"rule-part"},[e("span",[t._v(t._s(i+1)+".")]),e("p",[t._v(t._s(n))])])}))]):t._e()])},s=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"rule-title"},[e("span",[t._v("活动规则")])])}],a=e("059d"),o=e.n(a),c=(e("bc72"),e("20a2"),e("5475"),e("4aee")),r=e("0f35"),u=e("b12f"),p=e("f708"),l=function(){var t=this,n=t.$createElement,e=t._self._c||n;return 1===t.theme?e("div",{staticClass:"coupon",style:t.bottomStyle},[e("div",{staticClass:"coupon-left"},[e("div",{staticClass:"coupon-price"},[e("span",{staticClass:"price-icon"},[t._v("¥")]),e("span",{staticClass:"price-size",style:t.fontStyle},[t._v(t._s(t.coupon.money))])]),e("p",{staticClass:"coupon-desc"},[t._v("满"+t._s(t.coupon.pay_min)+"可用")])]),e("div",{staticClass:"coupon-right"},[e("span",{staticClass:"round-top"}),e("span",{staticClass:"round-bottom"}),e("p",{staticClass:"coupon-name"},[t._v(t._s(t.coupon.name))]),t.validTime?e("p",{staticClass:"coupon-time"},[t._v("有效期 "+t._s(t.validTime))]):t._e()])]):t._e()},d=[],f={props:{coupon:{default:function(){},type:Object},theme:{default:1},bottom:{default:5}},methods:{},computed:{fontStyle:function(){var t=this.coupon.money,n=String(t).length;return{fontSize:"".concat(35-19*((n>6?6:n)-1)*.25,"px")}},bottomStyle:function(){return{marginBottom:"".concat(this.bottom,"px")}},validTime:function(){var t=this.coupon,n=t.valid_type,e=t.valid_days,i=t.begin_time,s=t.end_time,a="";return 0===n&&(a="".concat(i,"至").concat(s)),1===n&&(a="".concat(e," 天")),a}}},h=f,m=(e("2b73"),e("17cc")),v=Object(m["a"])(h,l,d,!1,null,"46e6fdde",null),_=v.exports,b={name:"coupon",mixins:[r["a"]],components:{CouponItem:_},data:function(){return{code:"",status:null,title:"",banner:"",btn_text:"",btn_url:"",native_url:"",description:"",prizes:null,id:"",time:null,timeCount:5,attend_type:0}},computed:{statusEnum:function(){var t=this.status,n=this.attend_type;return{0:"你来早啦，活动还没有开始哦",1:"你来早啦，活动还没有开始哦",2:"领取中...",3:"啊哦，活动已经结束啦",4:"今天活动还没开始哦，再等等",5:"啊哦，今天已经结束啦，明天早点来吧",6:"今天的优惠券已经被抢光了，明天再来吧",7:"好券不等人，优惠券已经被抢光啦",97:"你".concat(n?"今天":"","已经领过优惠券啦"),98:"抱歉，本活动仅限老用户参与",99:"抱歉，本活动仅限新用户参与",200:"恭喜你，成功领取优惠券!"}[t]},showCoupon:function(){return 97===this.status||200===this.status}},watch:{user_login:{handler:function(t){""!==t&&this.requestInfo()},immediate:!0}},methods:{requestInfo:function(){var t=Object(c["a"])(o.a.mark(function t(){var n,e,i,s,a,c,r,p,l,d,f,h,m,v,_,b=this;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=this.$route.query.code,t.next=3,this.$http.get(u["a"].eventApi("info"),{code:n});case 3:e=t.sent,i=e.data,i&&(s=i.status,a=i.title,c=i.banner,r=i.btn_text,p=i.btn_url,l=i.native_url,d=i.description,f=i.share_info,h=i.id,m=i.prizes,v=i.attend_type,Object.assign(this,{code:n,status:s,title:a,banner:c,btn_text:r,btn_url:p,native_url:l,description:d?d.split("\n"):"",id:h,prizes:m,attend_type:v}),this.updateShare(f),3===s&&(_=this.timeCount,this.countDown(_,function(){b.eventNotice()})),2===s&&(this.user_login?this.requestTake():this.$store.state.login.isShowLogin=!0));case 6:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),requestTake:function(){var t=Object(c["a"])(o.a.mark(function t(){var n,e,i;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=this.code,t.next=3,this.$http.get(u["a"].eventApi("attend"),{code:n,unread_pop:1},!1);case 3:e=t.sent,i=e.data,i&&(this.prizes=i.concat([]),this.status=200);case 6:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),eventGoBtn:function(){var t=this.btn_url,n=this.native_url,e=this.code;this.log({aid:"go",cid:"event",from:p["a"].isWeixin?"weixin":"",code:e}),this.openUrl({path:p["a"].isApp?n:t})},eventNotice:function(){clearTimeout(this.time),this.openUrl({path:p["a"].isApp?"ddxq://product/home":"maicai:/market"})},countDown:function(t,n){var e=this;this.time=setTimeout(function(){t>0?(e.countDown(t-1,n),e.timeCount=t-1):(n&&n(),clearTimeout(e.time))},1e3)}},destroyed:function(){clearTimeout(this.time)}},g=b,w=(e("4bec"),Object(m["a"])(g,i,s,!1,null,"751840a7",null));n["default"]=w.exports},e7f7:function(t,n,e){}}]);
//# sourceMappingURL=Coupon.19fdd8d3.js.map