(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["VipFriendsGive"],{"0f35":function(t,i,n){"use strict";n("20a2");var e=n("113c"),a=n("16bc"),s=n("eba3"),o=n("42a5"),c=n("3098"),r=n("e791"),u=n("c53f"),d=n("f708"),p=n("b893"),f=n("5d2d");i["a"]={mounted:function(){var t=this;this.setApp(),this.waitInit(function(){t.setWx()})},data:function(){var t={},i=f["a"].load("USER_INFO"),n=i.id;if(r["a"].indexOf(this.$path)>=0){var e=this.$route.query.friend_id;t={title:"这一年，我在叮咚买菜的那些柴米油盐",desc:"2018悄悄过去，关于你的小秘密都在这里，最后有惊喜！",friends_title:"这一年，我在叮咚买菜的那些柴米油盐",img_url:a["j"],link:Object(p["g"])("/bill",{friend_id:n||e})}}else t={title:"叮咚买菜，29分钟生鲜到家~",desc:"0配送费0起送价的买菜神器，新人注册还有38元红包哦~",friends_title:"叮咚买菜，29分钟生鲜到家~",img_url:a["c"],link:Object(p["g"])(this.$route.fullPath)};return{common_share_info:t}},computed:{$path:function(){return this.$route.path}},methods:{setWx:function(){if(d["a"].isWeixin){var t=this.common_share_info;u["a"].setShareOption(t)}},setApp:function(){var t=this;if(d["a"].isApp&&!(r["f"].indexOf(this.$path)>=0)){c["a"].APP_E3=o["a"].subscribe(c["a"].APP_E3,function(){r["a"].indexOf(t.$path)>=0&&t.log({cid:"mybill",aid:"share"}),t.appShare()});var i={image:a["b"]};s["a"].setRightTopButton(i)}},appShare:function(){d["a"].isApp&&s["a"].share(Object(e["a"])({},this.common_share_info))},updateShare:function(t){this.common_share_info=Object.assign(this.common_share_info,t||{}),this.setWx()}}}},"16bc":function(t,i,n){"use strict";n.d(i,"b",function(){return a}),n.d(i,"c",function(){return s}),n.d(i,"g",function(){return o}),n.d(i,"h",function(){return c}),n.d(i,"e",function(){return r}),n.d(i,"f",function(){return u}),n.d(i,"d",function(){return d}),n.d(i,"i",function(){return p}),n.d(i,"j",function(){return f}),n.d(i,"l",function(){return l}),n.d(i,"m",function(){return v}),n.d(i,"n",function(){return h}),n.d(i,"o",function(){return g}),n.d(i,"p",function(){return m}),n.d(i,"q",function(){return _}),n.d(i,"r",function(){return w}),n.d(i,"s",function(){return b}),n.d(i,"t",function(){return y}),n.d(i,"u",function(){return k}),n.d(i,"a",function(){return x}),n.d(i,"v",function(){return C}),n.d(i,"k",function(){return I}),n.d(i,"w",function(){return S}),n.d(i,"x",function(){return O});var e=function(t){return"https://img.ddimg.mobi/assets/h5/".concat(t)},a=e("4602b1a87656d1501819113290.png"),s=e("9c3a30349e68a1498706936110.png"),o=e("activity-bill-first-head-log.png"),c=e("activity-bill-first-middle.png"),r=e("activity-bill-first-right-font2.png"),u=e("activity-bill-first-right-font1.png"),d=e("activity-bill-first-bottom.png"),p=e("activity-bill-pack-foot-logo.png"),f=e("activity-bill-share-small-img.png"),l=e("newtask/icon-buy.png"),v=e("newtask/icon-day.png"),h=e("newtask/icon-evaluate.png"),g=e("newtask/icon-fish.png"),m=e("newtask/icon-info.png"),_=e("newtask/icon-invite.png"),w=e("newtask/icon-meat.png"),b=e("newtask/icon-sign.png"),y=e("newtask/icon-vip.png"),k=e("newtask/logo-bottom.png"),x=e("44b2872a591fe1503888813415.png"),C=e("receive-cart-tip.png?v=1"),I=e("give-cart-title.png?v=1"),S=e("vip/member-0.png"),O=e("vip/member-1.png")},"1ad6":function(t,i,n){"use strict";var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",[n("transition",{attrs:{name:"box"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.popShow,expression:"popShow"}],staticClass:"mask-pop",on:{click:t._closePop}})]),n("transition",{attrs:{name:"box-content"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.popShow,expression:"popShow"}],staticClass:"pop-box",class:"theme-"+t.theme,on:{click:function(t){t.stopPropagation()}}},["0"===t.theme?n("icon-font",{staticClass:"close-icon",attrs:{name:"guanbiyoushangjiao",color:"#cccccc",size:"30"},on:{click:t._closePop}}):t._e(),"1"===t.theme?n("icon-font",{staticClass:"close-icon",class:"theme-"+t.theme,attrs:{name:"gouwuchedankuangguanbi",color:"#ffffff",size:"50"},on:{click:t._closePop}}):t._e(),t._t("default")],2)])],1)},a=[],s={name:"pop-box",props:{show:{default:!1,type:Boolean},theme:{default:"0",type:String}},data:function(){return{popShow:this.show}},watch:{show:function(){this.popShow=this.show}},methods:{_closePop:function(){this.$emit("clickClosePop"),this.popShow=!1}}},o=s,c=(n("d53f"),n("17cc")),r=Object(c["a"])(o,e,a,!1,null,"7554a576",null);i["a"]=r.exports},"1e8c":function(t,i,n){"use strict";n.d(i,"a",function(){return e}),n.d(i,"b",function(){return a}),n.d(i,"c",function(){return s});var e="https://www.100.me/mc",a="https://100.me/d",s="https://maicai.api.ddxq.mobi/info/single"},"2b86":function(t,i,n){"use strict";n.r(i);var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"page-wrapper"},[t.cartTip?n("div",{staticClass:"cart-tip"},[t._v(t._s(t.cartTip))]):t._e(),n("div",{staticClass:"cart-body"},[n("img",{staticClass:"cart-title",attrs:{src:t.imgGiveCartTitle}}),n("div",{staticClass:"cart-content"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.activityInfo.img,expression:"activityInfo.img"}],staticClass:"img"}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.activityInfo.days,expression:"activityInfo.days"}],staticClass:"cart-days"},[n("span",{staticClass:"day-count"},[t._v(t._s(t.activityInfo.days))]),n("span",[t._v("天")])])]),t.isShowOpenApp?n("div",{staticClass:"cart-button",on:{click:t.submitReceive}},[t._v("立即免费领取")]):n("div",{staticClass:"cart-button",on:{click:t.openApp}},[t._v(t._s("打开APP"+(t.activityInfo.get_user&&t.user_info.id===t.activityInfo.get_user?"使用":"")))])]),n("div",{staticClass:"cart-rule"},[t._m(0),n("table",{staticClass:"rule-body"},[n("tbody",t._l(t.rules,function(i,e){return n("tr",{key:e},[n("td",[t._v(t._s(e+1)+".")]),n("td",[t._v(t._s(i))])])}))])]),n("pop-box",{attrs:{show:t.isShowReceiveInfo,theme:"1"},on:{clickClosePop:t.closeModule}},[n("div",{staticClass:"receive-info"},[n("div",{staticClass:"title"},[t._v("恭喜你，领取成功")]),n("div",{staticClass:"tip"},[t._v("打开APP，在【我的】页面，点击【查看详情】查看。")]),n("div",{staticClass:"img-explain"},[n("img",{attrs:{src:t.receiveCartTipPath}})]),n("div",{staticClass:"to-vip",on:{click:t.openApp}},[t._v("立享特权")])])])],1)},a=[function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"divider"},[n("div",{staticClass:"divider-title"},[t._v("领取规则")])])}],s=n("059d"),o=n.n(s),c=(n("20a2"),n("5475"),n("4aee")),r=n("b12f"),u=n("1ad6"),d=n("1e8c"),p=n("16bc"),f=n("0f35"),l={obtain:1,give:2,gain:3,use:4,overdue:5},v={cid:"get_friends_vip_card",name:""},h={components:{PopBox:u["a"]},mixins:[f["a"]],name:"vip_give_friends",data:function(){return{isLoading:!1,receiveCartTipPath:p["v"],imgGiveCartTitle:p["k"],userInfo:{},isShowReceiveInfo:!1,isShowOpenApp:!1,cartTip:"",activityInfo:{},card_id:"",rules:["此亲友卡为叮咚买菜绿卡会员体验卡，领取后即可获得相应天数的绿卡体验期，立享叮咚绿卡特权；","体验卡特权有：可领每月不低于292元的绿卡专享券，购物可获2倍抵现积分，还有每周大量专享特价商品，买菜更划算；","每张亲友卡仅限1人领取，每人每年仅限领取1张；","亲友卡仅限非绿卡会员领取，如已开通绿卡并在有效期内将无法领取；","领取成功后请至叮咚买菜APP内享用特权；","如未领取，此亲友卡可分享链接后转赠他人。"]}},watch:{user_login:{handler:function(t){0===t&&this.loadDataInfo()},immediate:!0},user_info:{handler:function(t){t.id&&this.loadDataInfo()},immediate:!0}},methods:{loadDataInfo:function(){var t=Object(c["a"])(o.a.mark(function t(){var i,n,e;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=this,i.card_id=i.$route.query.card_id,v.name=i.card_id,t.next=5,i.$http.get(r["a"].vipApi("friendsCardDetail"),{card_id:i.card_id});case 5:n=t.sent,n.data?(e=n.data.share_info,i.isShowOpenApp=!1,i.activityInfo=n.data,i.activityInfo.status==l.overdue?i.cartTip="抱歉，领取失败，亲友卡已过期":i.activityInfo.get_user&&i.user_info.id===i.activityInfo.get_user?i.cartTip="你已领取该亲友卡":i.activityInfo.is_get?i.cartTip="抱歉，领取失败，每年仅限领取1次，您已经领过啦 ":i.activityInfo.get_user&&i.user_info.id!==i.activityInfo.get_user?i.cartTip="抱歉，领取失败，体验卡已被他人领取":i.activityInfo.is_vip?i.cartTip="抱歉，领取失败，你已经是绿卡会员啦":i.isShowOpenApp=!0,e&&i.updateShare(e),i.log(Object.assign({aid:"index",index:i.isShowOpenApp?1:0,value:i.isShowOpenApp?"":i.cartTip},v))):i.log(Object.assign({aid:"index",index:0,value:n.error?n.error.msg:"加载亲友卡异常"},v)),i.$nextTick(function(){i.isLoading=!0});case 8:case"end":return t.stop()}},t,this)}));function i(){return t.apply(this,arguments)}return i}(),submitReceive:function(){var t=Object(c["a"])(o.a.mark(function t(){var i,n,e;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=this,i.user_login){t.next=4;break}return i.$store.state.login.isShowLogin=!0,t.abrupt("return",!1);case 4:return i.log(Object.assign({aid:"get"},v)),t.next=7,i.$http.post(r["a"].vipApi("friendsCardGet"),{card_id:i.card_id});case 7:n=t.sent,e=n.data,e&&(i.isShowReceiveInfo=!0,i.log(Object.assign({aid:"get_success"},v)));case 10:case"end":return t.stop()}},t,this)}));function i(){return t.apply(this,arguments)}return i}(),openApp:function(){this.log(Object.assign({aid:"go_and_use"},v)),this.openUrl({path:d["b"],query:{s:"qinyouka"}})},closeModule:function(){this.loadDataInfo(),this.isShowReceiveInfo=!1}}},g=h,m=(n("35c3"),n("17cc")),_=Object(m["a"])(g,e,a,!1,null,"17c28400",null);i["default"]=_.exports},"35c3":function(t,i,n){"use strict";var e=n("d1f2"),a=n.n(e);a.a},4551:function(t,i,n){},d1f2:function(t,i,n){},d53f:function(t,i,n){"use strict";var e=n("4551"),a=n.n(e);a.a}}]);
//# sourceMappingURL=VipFriendsGive.fa404177.js.map