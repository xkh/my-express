(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Invite"],{"0c50":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"offline"},[e.banner?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.banner,expression:"banner"}],staticClass:"offline-banner",attrs:{alt:""}}):e._e(),i("div",{staticClass:"offline-content"},[e.isLogin&&2===e.status&&e.err_msg?i("div",{staticClass:"offline-msg"},[e._v(e._s(e.err_msg))]):e._e(),e.isLogin&&1===e.status&&e.err_msg?i("div",{staticClass:"offline-msg offline-error"},[e._v(e._s(e.err_msg))]):e._e(),i("div",{class:e.isClickCoupons||1===e.status?"offline-down":""},[e.isLogin&&(0!==e.status||e.isClickCoupons&&0===e.status)?i("div",{class:["offline-btn",e.isClickCoupons||1===e.status?"offline-fixed":""],on:{click:e.getDown}},[e._v(e._s(2===e.status?"下载APP领38元新人红包":"立即下载APP使用"))]):e._e()]),e.isLogin&&e.isClickCoupons?i("div",[e.coupons.length?i("div",{staticClass:"offline-msg offline-title"},[e._v("恭喜你，成功领取红包！")]):e._e(),e.coupons.length?i("div",e._l(e.coupons,function(t,n){return i("div",{key:n+"coupons"},[i("div",{staticClass:"offline-coupon"},[i("div",{staticClass:"offline-coupon-left"},[i("div",{staticClass:"offline-coupon-price"},[e._v("¥"),i("span",{class:t.money.length<4?"coupon-price":""},[e._v(e._s(t.money))])]),i("div",{staticClass:"offline-coupon-desc"},[e._v("满"+e._s(t.pay_min)+"元使用")])]),i("div",{staticClass:"offline-coupon-middle"}),i("div",{staticClass:"offline-coupon-right"},[i("div",{staticClass:"offline-coupon-name"},[e._v(e._s(t.name))]),i("div",{staticClass:"offline-coupon-desc"},[e._v(e._s(t.valid_days)+"天后过期")])])])])})):e._e(),e.register_coupons.length&&e.register_title?i("div",{staticClass:"offline-msg offline-title offline-msg-top"},[e._v(e._s(e.register_title))]):e._e(),e.register_coupons.length?i("div",e._l(e.register_coupons,function(t,n){return i("div",{key:n+"register"},[i("div",{staticClass:"offline-coupon"},[i("div",{staticClass:"offline-coupon-left"},[i("div",{staticClass:"offline-coupon-price"},[e._v("¥"),i("span",{class:(t.money+"").length<4?"coupon-price":""},[e._v(e._s(t.money))])]),i("div",{staticClass:"offline-coupon-desc"},[e._v("满"+e._s(t.pay_min)+"元使用")])]),i("div",{staticClass:"offline-coupon-middle"}),i("div",{staticClass:"offline-coupon-right"},[i("div",{staticClass:"offline-coupon-name"},[e._v(e._s(t.name))]),i("div",{staticClass:"offline-coupon-desc"},[e._v(e._s(t.valid_days)+"天后过期")])])])])})):e._e()]):e._e(),e.isLogin&&!e.isClickCoupons&&0===e.status?i("div",[i("div",{staticClass:"offline-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.inviteCode,expression:"inviteCode"}],staticClass:"offline-input",attrs:{type:"number",placeholder:"请输入邀请码领红包"},domProps:{value:e.inviteCode},on:{input:function(t){t.target.composing||(e.inviteCode=t.target.value)}}})]),i("div",{class:["offline-btn",e.inviteCode.length>0?"":"offline-btn-disable"],on:{click:e.getCoupons}},[e._v("领取红包")])]):e._e(),e.isLogin?e._e():i("div",[i("LoginComp",{on:{onLogin:e.handleLogin}})],1)]),i("div",{staticClass:"offline-div"}),i("div",{staticClass:"offline-notice"},[i("div",{staticClass:"offline-notice-line"}),i("div",{staticClass:"offline-notice-item",domProps:{innerHTML:e._s(e.description)}})])])},s=[],o=(i("aba3"),i("059d")),a=i.n(o),r=(i("5475"),i("4aee")),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"login-item login-mobile"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],staticClass:"login-input",attrs:{type:"tel",placeholder:"输入手机号码",maxlength:"11"},domProps:{value:e.mobile},on:{input:function(t){t.target.composing||(e.mobile=t.target.value)}}}),i("i",{directives:[{name:"show",rawName:"v-show",value:e.mobile.length,expression:"mobile.length"}],staticClass:"iconfont icondelete",on:{click:function(t){e.clearInput("mobile")}}})]),e.need_verify_code?i("div",{staticClass:"login-item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.verify_code,expression:"verify_code"}],staticClass:"login-input",attrs:{type:"text",placeholder:"输入图形验证码"},domProps:{value:e.verify_code},on:{input:function(t){t.target.composing||(e.verify_code=t.target.value)}}}),i("div",{staticClass:"login-item-right"},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.verify_code.length,expression:"verify_code.length"}],staticClass:"iconfont icondelete",on:{click:function(t){e.clearInput("verify_code")}}}),i("div",{staticClass:"login-input-btn",on:{click:e.changeImg}},[i("img",{staticClass:"login-img",attrs:{src:e.verifyImg}})])])]):e._e(),i("div",{staticClass:"login-item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"login-input",attrs:{type:"tel",placeholder:"输入验证码",maxlength:"4"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),i("div",{staticClass:"login-item-right"},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.code.length,expression:"code.length"}],staticClass:"iconfont icondelete",on:{click:function(t){e.clearInput("code")}}}),i("div",{class:["login-btn login-input-btn",e.canGetCode?"":"login-btn-disable"],on:{click:function(t){e.getSms(1)}}},[e._v(e._s(e.time_text))])])]),i("div",{class:["login-item login-btn login-submit",e.canSubmit?"":"login-btn-disable"],on:{click:e.handleLogin}},[e._v("登录")])])},l=[],u=(i("84fb"),i("b12f")),d=i("7b0a"),f=i("5d2d"),v={data:function(){return{mobile:"",verify_code:"",need_verify_code:0,code:"",canGetCode:!1,canSubmit:!1,time_text:"获取验证码",timer:null,verifyImg:u["a"].userApi("verifyCode?"+Math.random())}},props:{toast:Boolean,time:{type:Number,default:60},source:String},watch:{mobile:function(){this.canGetCode=this.validateCode(!0,"1234"),this.canSubmit=this.validateCode(!0)},verify_code:function(){this.canGetCode=this.validateCode(!0,"1234"),this.canSubmit=this.validateCode(!0)},code:function(){this.canSubmit=this.validateCode(!0)}},methods:{changeImg:function(){this.verifyImg=u["a"].userApi("verifyCode?"+Math.random())},clearInput:function(e){this[e]=""},validateCode:function(e,t){var i=this.mobile,n=this.verify_code,s=this.need_verify_code,o=this.code,a=d["a"].validateMobile(i),r=d["a"].validateSmsCode(t||o),c=d["a"].validateImgCode(n),l=s&&c;return!(a||l||r)||(this.$emit("onError",a||l&&c||r),!1)},getSms:function(){var e=Object(r["a"])(a.a.mark(function e(t){var i,n,s,o,r,c,l;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=this,this.validateCode(this.toast,"1234")&&this.canGetCode){e.next=3;break}return e.abrupt("return");case 3:return this.canGetCode=!1,n=this.mobile,s=this.verify_code,e.next=7,this.$http.get(u["a"].userApi("getSms"),{mobile:n,verify_code:s,type:t},!1,!1);case 7:o=e.sent,r=o.data,c=o.error,c&&(-1e3===c.code&&(l=c.data.need_verify_code,this.need_verify_code=l),1205===c.code?this.$confirm({title:"建议获取语音验证码",content:"收不到验证码？可尝试语音验证码，请点击确定后注意接听电话",success:function(){i.canGetCode=!0,i.getSms(3),i.log({cid:"login",aid:"get_voice_code"})},cancel:function(){i.canGetCode=!0}}):this.$toast(c.msg)),r&&this.countDown();case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleLogin:function(){var e=Object(r["a"])(a.a.mark(function e(){var t,i,n,s,o,r,c;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.mobile,i=this.verify_code,n=this.code,s=this.source,this.validateCode(this.toast,n)){e.next=3;break}return e.abrupt("return");case 3:return o={mobile:t,verify_code:i,code:n,source:s},e.next=6,this.$http.get(u["a"].userApi("qlogin"),o,!1);case 6:r=e.sent,c=r.data,c||this.$emit("onError"),c&&(this.$emit("onLogin",c),f["a"].save("USER_INFO",c),this.$store.state.login.user_info=c);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),countDown:function(){var e=this,t=this.time;this.time_text="获取(".concat(t,")"),clearInterval(this.timer),this.timer=setInterval(function(){t--,e.time_text="获取(".concat(t,")"),t<0&&(clearInterval(e.timer),e.time_text="重新获取",t=60,e.canGetCode=!0)},1e3)}},destroyed:function(){clearInterval(this.timer)}},p=v,h=(i("35b6"),i("17cc")),g=Object(h["a"])(p,c,l,!1,null,"2c553752",null),m=g.exports,_={components:{LoginComp:m},data:function(){return{isLogin:!1,inviteCode:"",isClickCoupons:!1,err_msg:"",description:"",banner:"",status:"",app_url:"",coupons:[],register_coupons:[],register_title:""}},methods:{handleLogin:function(){var e=this;this.$store.dispatch("login/setLoginCheck").then(function(){e.getDetail()})},getCoupons:function(){var e=Object(r["a"])(a.a.mark(function e(){var t,i,n,s,o;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.inviteCode,i=this.$store.state.login.user_info.mobile,this.log({cid:"invite_code",aid:"invite_code_click",value:i,name:t}),t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.$http.get(u["a"].eventApi("newInvite"),{inviteCode:t,type:"invite_code"},!1);case 7:if(n=e.sent,s=n.data,s){e.next=11;break}return e.abrupt("return");case 11:s&&(this.isClickCoupons=!0),this.coupons=s.coupons,this.register_coupons=s.register_coupons,this.register_title=s.register_title,o=1===this.coupons.length?this.coupons[0].id:"",this.log({cid:"invite_code",aid:"get_coupon_success",name:o});case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getDetail:function(){var e=Object(r["a"])(a.a.mark(function e(t){var i,n,s,o,r,c,l,d,f;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=this.$route.query.channel,n=t||this.$store.state.login.openid,e.next=4,this.$http.get(u["a"].eventApi("inviteH5"),{openid:n,s:i},!0,!1,!0);case 4:if(s=e.sent,o=s.data,o){e.next=8;break}return e.abrupt("return");case 8:this.isLogin=this.$store.state.login.user_login,r=o.banner,c=o.description,l=o.err_msg,d=o.status,f=o.app_url,this.banner=r,this.description=c.replace(/\n/gm,"<br/>"),this.err_msg=l,this.status=d,this.app_url=f;case 15:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getDown:function(){this.openUrl({path:this.app_url})},watchOpenId:function(){this.log({cid:"invite_code",aid:"index"}),this.getDetail()}},created:function(){var e=this.$store.state.login.openid;e&&this.log({cid:"invite_code",aid:"index"}),this.getDetail()}},C=_,b=(i("b3f2"),Object(h["a"])(C,n,s,!1,null,"57610da8",null));t["default"]=b.exports},3542:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"35b6":function(e,t,i){"use strict";var n=i("6f7e"),s=i.n(n);s.a},"6f7e":function(e,t,i){},"84fb":function(e,t,i){"use strict";var n=i("53da"),s=i("7a57"),o=i("af55"),a=i("69d8"),r=i("4b3d"),c=i("cce3"),l=i("e853").f,u=i("8566").f,d=i("9a0d").f,f=i("d079").trim,v="Number",p=n[v],h=p,g=p.prototype,m=o(i("e177")(g))==v,_="trim"in String.prototype,C=function(e){var t=r(e,!1);if("string"==typeof t&&t.length>2){t=_?t.trim():f(t,3);var i,n,s,o=t.charCodeAt(0);if(43===o||45===o){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,s=49;break;case 79:case 111:n=8,s=55;break;default:return+t}for(var a,c=t.slice(2),l=0,u=c.length;l<u;l++)if(a=c.charCodeAt(l),a<48||a>s)return NaN;return parseInt(c,n)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof p&&(m?c(function(){g.valueOf.call(i)}):o(i)!=v)?a(new h(C(t)),i,p):C(t)};for(var b,y=i("f711")?l(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;y.length>w;w++)s(h,b=y[w])&&!s(p,b)&&d(p,b,u(h,b));p.prototype=g,g.constructor=p,i("7e22")(n,v,p)}},b3f2:function(e,t,i){"use strict";var n=i("b716"),s=i.n(n);s.a},b716:function(e,t,i){},d079:function(e,t,i){var n=i("8718"),s=i("5b8a"),o=i("cce3"),a=i("3542"),r="["+a+"]",c="​",l=RegExp("^"+r+r+"*"),u=RegExp(r+r+"*$"),d=function(e,t,i){var s={},r=o(function(){return!!a[e]()||c[e]()!=c}),l=s[e]=r?t(f):a[e];i&&(s[i]=l),n(n.P+n.F*r,"String",s)},f=d.trim=function(e,t){return e=String(s(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d}}]);
//# sourceMappingURL=Invite.cb63035e.js.map