(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["BillPack"],{"0f35":function(t,n,i){"use strict";i("20a2");var e=i("113c"),s=i("16bc"),a=i("eba3"),o=i("42a5"),c=i("3098"),r=i("e791"),u=i("c53f"),p=i("f708"),l=i("b893"),d=i("5d2d");n["a"]={mounted:function(){var t=this;this.setApp(),this.waitInit(function(){t.setWx()})},data:function(){var t={},n=d["a"].load("USER_INFO"),i=n.id;if(r["a"].indexOf(this.$path)>=0){var e=this.$route.query.friend_id;t={title:"这一年，我在叮咚买菜的那些柴米油盐",desc:"2018悄悄过去，关于你的小秘密都在这里，最后有惊喜！",friends_title:"这一年，我在叮咚买菜的那些柴米油盐",img_url:s["j"],link:Object(l["g"])("/bill",{friend_id:i||e})}}else t={title:"叮咚买菜，29分钟生鲜到家~",desc:"0配送费0起送价的买菜神器，新人注册还有38元红包哦~",friends_title:"叮咚买菜，29分钟生鲜到家~",img_url:s["c"],link:Object(l["g"])(this.$route.fullPath)};return{common_share_info:t}},computed:{$path:function(){return this.$route.path}},methods:{setWx:function(){if(p["a"].isWeixin){var t=this.common_share_info;u["a"].setShareOption(t)}},setApp:function(){var t=this;if(p["a"].isApp&&!(r["f"].indexOf(this.$path)>=0)){c["a"].APP_E3=o["a"].subscribe(c["a"].APP_E3,function(){r["a"].indexOf(t.$path)>=0&&t.log({cid:"mybill",aid:"share"}),t.appShare()});var n={image:s["b"]};a["a"].setRightTopButton(n)}},appShare:function(){p["a"].isApp&&a["a"].share(Object(e["a"])({},this.common_share_info))},updateShare:function(t){this.common_share_info=Object.assign(this.common_share_info,t||{}),this.setWx()}}}},"16bc":function(t,n,i){"use strict";i.d(n,"b",function(){return s}),i.d(n,"c",function(){return a}),i.d(n,"g",function(){return o}),i.d(n,"h",function(){return c}),i.d(n,"e",function(){return r}),i.d(n,"f",function(){return u}),i.d(n,"d",function(){return p}),i.d(n,"i",function(){return l}),i.d(n,"j",function(){return d}),i.d(n,"l",function(){return _}),i.d(n,"m",function(){return f}),i.d(n,"n",function(){return h}),i.d(n,"o",function(){return v}),i.d(n,"p",function(){return g}),i.d(n,"q",function(){return m}),i.d(n,"r",function(){return b}),i.d(n,"s",function(){return w}),i.d(n,"t",function(){return C}),i.d(n,"u",function(){return y}),i.d(n,"a",function(){return k}),i.d(n,"v",function(){return x}),i.d(n,"k",function(){return O}),i.d(n,"w",function(){return $}),i.d(n,"x",function(){return j});var e=function(t){return"https://img.ddimg.mobi/assets/h5/".concat(t)},s=e("4602b1a87656d1501819113290.png"),a=e("9c3a30349e68a1498706936110.png"),o=e("activity-bill-first-head-log.png"),c=e("activity-bill-first-middle.png"),r=e("activity-bill-first-right-font2.png"),u=e("activity-bill-first-right-font1.png"),p=e("activity-bill-first-bottom.png"),l=e("activity-bill-pack-foot-logo.png"),d=e("activity-bill-share-small-img.png"),_=e("newtask/icon-buy.png"),f=e("newtask/icon-day.png"),h=e("newtask/icon-evaluate.png"),v=e("newtask/icon-fish.png"),g=e("newtask/icon-info.png"),m=e("newtask/icon-invite.png"),b=e("newtask/icon-meat.png"),w=e("newtask/icon-sign.png"),C=e("newtask/icon-vip.png"),y=e("newtask/logo-bottom.png"),k=e("44b2872a591fe1503888813415.png"),x=e("receive-cart-tip.png?v=1"),O=e("give-cart-title.png?v=1"),$=e("vip/member-0.png"),j=e("vip/member-1.png")},"1e8c":function(t,n,i){"use strict";i.d(n,"a",function(){return e}),i.d(n,"b",function(){return s}),i.d(n,"c",function(){return a});var e="https://www.100.me/mc",s="https://100.me/d",a="https://maicai.api.ddxq.mobi/info/single"},"39c6":function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return t.load?i("div",{staticClass:"bill-pack-wrapper"},[i("div",{staticClass:"open-head"},[t.is_new_user?i("div",{class:"not-look "+t.layout},[i("p",[t._v("抱歉，2018年你还没有使用过叮咚买菜")]),i("p",[t._v("无法查看账单")])]):t._e(),t.is_new_user?t._e():i("div",{staticClass:"can-look"},[i("p",[t._v("你的2019开运红包是")])])]),t.is_get_reward?t._e():i("div",{staticClass:"open-no",on:{click:t.eventOpenCoupon}},[t.load?i("div",{staticClass:"open-pack active"}):t._e()]),t.is_get_reward?i("div",{staticClass:"open-had"},[t.is_new_user?i("div",{staticClass:"coupon-title"},[t._v("恭喜你，获得了")]):t._e(),t.new_user_coupon.length?t._e():i("div",{staticClass:"coupon-one"},[i("div",{staticClass:"coupon-one-left"},[i("div",{staticClass:"one-left-price"},[i("span",[t._v("￥")]),i("strong",[t._v(t._s(t.coupon.money))])]),i("div",{staticClass:"one-left-desc"},[t._v("满"+t._s(t.coupon.pay_min)+"元使用")])]),i("div",{staticClass:"coupon-one-right"},[i("p",{staticClass:"one-right-name"},[t._v(t._s(t.coupon.name))]),i("p",{staticClass:"one-right-desc"},[t._v(t._s(t.coupon.description))]),i("p",{staticClass:"one-right-time"},[t._v(t._s(t.coupon.valid_days)+"天后过期")])])]),t.new_user_coupon.length?i("div",{staticClass:"coupon-list"},[i("pack-coupon",{attrs:{coupon:t.coupon}}),i("div",{staticClass:"list-part-new"},[i("p",{staticClass:"list-new-title"},[t._v("还有38元新人红包")]),t._l(t.new_user_coupon,function(t,n){return i("pack-coupon",{key:n,attrs:{coupon:t}})})],2)],1):t._e(),i("div",{staticClass:"coupon-bottom"},[t.phone?i("p",{staticClass:"coupon-mobile"},[t._v("已放入账户 "+t._s(t.phone))]):t._e(),i("div",{staticClass:"coupon-bottom-info"},[t.is_new_user?i("div",{staticClass:"info-btn",on:{click:function(n){t.eventCouponUse({cid:"mybill",aid:"use"})}}},[t._v("立即使用")]):t._e(),t.is_new_user?t._e():i("p",{staticClass:"info-font"},[t._v(t._s(t.type))])])])]):t._e(),t.is_new_user?t._e():i("div",{staticClass:"foot-btn"},[i("div",{staticClass:"btn-again",on:{click:t.eventLookAgain}},[t._v("再看一遍")]),t.platform.isApp?i("div",{staticClass:"btn-share",on:{click:t.eventShare}},[t._v("分享给好友")]):t._e()]),t.is_new_user?i("div",{class:"foot-logo "+t.layout},[i("img",{attrs:{src:t.img_logo,alt:""}})]):t._e()]):t._e()},s=[],a=i("059d"),o=i.n(a),c=(i("5475"),i("4aee")),r=i("0f35"),u=i("f708"),p=i("1e8c"),l={methods:{eventCouponUse:function(t){t&&this.log(t),this.openUrl({path:u["a"].isApp?"ddxq://product/category":p["a"]})}}},d=i("b12f"),_=i("16bc"),f=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"list-part-small"},[i("div",{staticClass:"part-left"},[i("div",{staticClass:"left-price"},[i("span",[t._v("￥")]),i("strong",[t._v(t._s(t.coupon.money||"0"))])]),t.coupon.pay_min?i("div",{staticClass:"left-desc"},[t._v("满"+t._s(t.coupon.pay_min)+"元使用")]):t._e()]),i("div",{staticClass:"part-right"},[i("p",{staticClass:"right-name"},[t._v(t._s(t.coupon.name))]),i("p",{staticClass:"right-desc"},[t._v(t._s(t.coupon.description))]),t.coupon.valid_days?i("p",{staticClass:"right-time"},[t._v(t._s(t.coupon.valid_days)+"天后过期")]):t._e()])])},h=[],v={props:["coupon"]},g=v,m=(i("45fb"),i("17cc")),b=Object(m["a"])(g,f,h,!1,null,"30164790",null),w=b.exports,C=i("b893"),y=i("5d2d"),k={name:"bill",components:{PackCoupon:w},mixins:[r["a"],l],data:function(){return{is_new_user:0,is_get_reward:0,phone:"",coupon:null,new_user_coupon:[],type:"",img_logo:_["i"],layout:"",load:!1,platform:u["a"]}},created:function(){this.requestCouponInfo()},methods:{requestCouponInfo:function(){var t=Object(c["a"])(o.a.mark(function t(){var n,i,e,s;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get(d["a"].userBill("getUserCouponInfo"));case 2:n=t.sent,i=n.data,i&&(e=i.is_new_user,s=i.is_get_reward,e||s?this.updateData(i):this.requestReward());case 5:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),requestReward:function(){var t=Object(c["a"])(o.a.mark(function t(){var n,i;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get(d["a"].userBill("reward"));case 2:n=t.sent,i=n.data,i&&(this.log({cid:"mybill",aid:"get_redpacket"}),this.updateData(i));case 5:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),updateData:function(t){var n=t.is_new_user,i=t.is_get_reward,e=t.phone,s=t.coupon,a=t.new_user_coupon,o=t.type;this.is_new_user=n,this.is_get_reward=i,this.phone=e,this.coupon=s.length?s[0]:null,this.new_user_coupon=a,this.layout=a.length?"lay-0":"",this.type=o,this.load=!0;var c=y["a"].load("USER_INFO"),r=c.id;this.updateShare({link:Object(C["g"])("/bill",{friend_id:n?"":r})})},eventLookAgain:function(){this.$router.push({path:"/bill/detail"})},eventShare:function(){this.log({cid:"mybill",aid:"share_last"}),this.appShare()},eventOpenCoupon:function(){this.log({cid:"mybill",aid:"try_redpacket"}),this.$store.state.login.user_login?this.requestReward():this.$store.state.login.isShowLogin=!0}}},x=k,O=(i("3d93"),Object(m["a"])(x,e,s,!1,null,"08b2b922",null));n["default"]=O.exports},"3c16":function(t,n,i){},"3d93":function(t,n,i){"use strict";var e=i("3c16"),s=i.n(e);s.a},"45fb":function(t,n,i){"use strict";var e=i("af86"),s=i.n(e);s.a},af86:function(t,n,i){}}]);
//# sourceMappingURL=BillPack.80db9e7d.js.map